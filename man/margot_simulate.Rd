% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot_simulate.R
\name{margot_simulate}
\alias{margot_simulate}
\title{Simulate longitudinal exposures, outcomes, and covariates}
\usage{
margot_simulate(
  n,
  waves,
  exposures = NULL,
  outcomes = NULL,
  p_covars = 20,
  censoring = list(rate = 0.25),
  item_missing_rate = 0,
  exposure_outcome = 0.5,
  y_feedback = 0.4,
  positivity = "good",
  outcome_type = NULL,
  wide = TRUE,
  seed = NULL,
  params = list(),
  ...
)
}
\arguments{
\item{n}{Number of individuals.}

\item{waves}{Number of follow-up waves (outcomes are
produced for wave \code{waves + 1}).}

\item{exposures}{Named list describing each exposure.  Every
element must contain a \code{type} field (`"binary"` or `"normal"`).
Optional elements: \code{het} (baseline modifiers) and
\code{lag_Y = TRUE} to enable outcome-to-exposure feedback.}

\item{outcomes}{Named list describing outcomes.  Defaults to a
single normal outcome called `"Y"`.}

\item{p_covars}{Number of baseline (`B`) covariates.}

\item{censoring}{List controlling attrition.  Must include
\code{rate}; optional logical flags \code{exposure_dependence},
\code{latent_dependence}, numeric \code{latent_rho}, and logical
\code{indicator} to append \code{tX_not_censored} columns.}

\item{item_missing_rate}{MCAR probability an observed value is replaced
by \code{NA}.}

\item{exposure_outcome}{Coefficient for the exposure â†’ outcome path.}

\item{y_feedback}{Coefficient for lagged outcome feedback when
an exposure lists \code{lag_Y = TRUE}.}

\item{positivity}{`"good"`, `"poor"`, or a numeric probability
in (0, 1) governing baseline exposure prevalence.}

\item{outcome_type}{Shortcut for a single outcome:
`"continuous"` (default) or `"binary"`.  Ignored when
\code{outcomes} is supplied.}

\item{wide}{If \code{TRUE} (default) return a wide data
set; otherwise long format.}

\item{seed}{Integer seed for reproducibility.}

\item{params}{Named list of scalar coefficients (see above).}

\item{...}{Deprecated arguments; ignored with a warning.}
}
\value{
A `tibble` in wide or long form containing baseline `B`
  variables, time-varying `L` covariates, `A` exposures, optional
  censoring indicators, and lead outcomes `Y`.  The object carries an
  attribute \code{"margot_meta"} with the matched call and a timestamp.
}
\description{
`margot_simulate()` draws baseline covariates (`B`), time-varying
covariates (`L`), exposures (`A`), and lead outcomes (`Y`) for a
synthetic panel study.  Monotone attrition can depend on past exposure
and/or a latent shared frailty, and an optional indicator column
records whether each unit remains uncensored at every wave.  The
simulator supports heterogeneous treatment effects, feedback from
previous outcomes into future exposures, and marginal item
missingness.
}
\details{
The default parameter set is
\preformatted{
 .default_sim_params()
 ## $cens_exp_coef   0.4
 ## $cens_latent_rho 0.5
 ## $exp_intercept   -0.2
 ## $exp_L1_coef     0.2
 ## $out_B1_coef     0.1
}
}
\section{The `params` argument}{

Supply a named list to override the internal defaults given by
\code{.default_sim_params()}.  Typical entries include
\code{cens_exp_coef}, \code{exp_L1_coef}, and \code{out_B1_coef}.
}

\examples{
## basic usage
dat <- margot_simulate(n = 200, waves = 3, seed = 1)
dplyr::glimpse(dat)

## heterogeneous treatment effect with censoring indicator
dat2 <- margot_simulate(
  n = 800,
  waves = 4,
  exposures = list(
    A1 = list(
      type = "binary",
      het  = list(modifier = "B2", coef = 0.6)
    )
  ),
  censoring = list(
    rate = 0.25, exposure_dependence = TRUE,
    indicator = TRUE
  ),
  seed = 42
)

}
\seealso{
\code{\link{.default_sim_params}}
}
