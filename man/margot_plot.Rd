% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot_plot.R
\name{margot_plot}
\alias{margot_plot}
\title{Create a Margot Plot with Interpretation}
\usage{
margot_plot(
  .data,
  type = c("RD", "RR"),
  order = c("alphabetical", "magnitude_desc", "magnitude_asc", "evaluebound_desc",
    "evaluebound_asc", "custom", "default"),
  custom_order = NULL,
  title_binary = NULL,
  include_coefficients = TRUE,
  standardize_label = c("NZ", "US", "none"),
  interpret_all_E_gt1 = FALSE,
  e_val_bound_threshold = 1,
  ...,
  options = list(),
  label_mapping = NULL,
  save_output = FALSE,
  use_timestamp = FALSE,
  base_filename = "margot_plot_output",
  prefix = NULL,
  save_path = here::here("push_mods"),
  original_df = NULL,
  bold_rows = FALSE,
  rename_cols = FALSE,
  col_renames = list(`E-Value` = "E_Value", `E-Value bound` = "E_Val_bound"),
  rename_ate = FALSE
)
}
\arguments{
\item{.data}{a data frame with:
- `outcome` column,
- effect columns: `E[Y(1)]-E[Y(0)]` or `E[Y(1)]/E[Y(0)]`,
- confidence limits: `2.5 %`, `97.5 %`,
- `E_Value`, `E_Val_bound`, and optional `unit`.}

\item{type}{one of `"RD"` (risk difference) or `"RR"` (risk ratio). Default: `"RD"`.}

\item{order}{outcome sorting. Options:
- `alphabetical`, `magnitude_desc`, `magnitude_asc`,
- `evaluebound_desc`, `evaluebound_asc`, `custom`, `default`.
Default: `"alphabetical"`.}

\item{custom_order}{character vector for `order = "custom"`.}

\item{title_binary}{optional title for binary plots.}

\item{include_coefficients}{logical; include effect values on plot. Default: `TRUE`.}

\item{standardize_label}{one of `"NZ"`, `"US"`, or `"none"`. Default: `"NZ"`.}

\item{interpret_all_E_gt1}{logical; if `TRUE`, interpret all effects with
`E_Value > 1` & `E_Val_bound > 1`. Default: `FALSE`.}

\item{e_val_bound_threshold}{numeric; minimum `E_Val_bound` to treat an effect as
reliable. Default: `1`.}

\item{...}{additional args passed to `options`.}

\item{options}{list of plot & label options.}

\item{label_mapping}{named vector mapping original to display labels.}

\item{save_output}{logical; if `TRUE`, save output via `here_save_qs()`.
Default: `FALSE`.}

\item{use_timestamp}{logical; append timestamp to filename. Default: `FALSE`.}

\item{base_filename}{base of output filename. Default: `"margot_plot_output"`.}

\item{prefix}{optional filename prefix.}

\item{save_path}{directory for saving. Default: `here::here("push_mods")`.}

\item{original_df}{optional data frame for back-transformation.}

\item{bold_rows}{logical; bold row-names above threshold. Default: `FALSE`.}

\item{rename_cols}{logical; apply `col_renames`. Default: `FALSE`.}

\item{col_renames}{named list mapping new = old. Default:
`list("E-Value"="E_Value", "E-Value bound"="E_Val_bound")`.}

\item{rename_ate}{logical; rename effect column to `"ATE"`. Default: `FALSE`.}
}
\value{
A list with:
* `plot`:   a `ggplot2` object
* `interpretation`: markdown string
* `transformed_table`: input `.data` with transformed row-names
}
\description{
Create a Margot plot for visualising causal effects with flexible sorting,
embed a compact interpretation, and return a transformed table.
}
