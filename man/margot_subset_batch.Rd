% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot_subset_batch.R
\name{margot_subset_batch}
\alias{margot_subset_batch}
\title{Batch Process Subset Models for Causal Forests}
\usage{
margot_subset_batch(
  model_results,
  X,
  base_defaults = list(),
  title = "",
  label_mapping = NULL,
  subsets,
  debug = FALSE
)
}
\arguments{
\item{model_results}{Results from the causal forest model.}

\item{X}{Covariate matrix.}

\item{base_defaults}{A list of default plotting options.}

\item{title}{A character string for the main title of the plots.}

\item{label_mapping}{A named vector mapping variable names to labels.}

\item{subsets}{A named list of subset definitions. Each element should be a list containing:
\describe{
  \item{var}{A character string specifying the variable to subset on.}
  \item{value}{The value used to define the subset.}
  \item{operator}{(Optional) A comparison operator (default is \code{"=="}).}
  \item{description}{A character string describing the subset.}
}}

\item{debug}{Logical; if \code{TRUE}, prints debugging information.}
}
\value{
A list with the following elements:
  \describe{
    \item{results}{A list of subset results, each containing the plot and sample statistics.}
    \item{summary}{A data frame summarising the sample size, total sample size, and percentage for each subset.}
    \item{interpretation}{A character string providing a narrative of the comparisons including the composition of the subsets.}
  }
}
\description{
We compared treatment effects across multiple subsets derived from causal forest models (using the grf package).
For each subset, the number of participants, the total sample size, and the corresponding percentage are computed,
describing the composition of each targeted subpopulation. Note that exploratory comparisons in causal forest analyses
should be interpreted with caution, as subsetting targeted subpopulations may yield unstable treatment effect estimates,
typically indicated by large standard errors and wide confidence intervals.
}
\examples{
\dontrun{
# Define subsets
subsets <- list(
  "males" = list(var = "gender", value = "male", description = "Males only"),
  "older" = list(var = "age", value = 30, operator = ">=", description = "Age 30 or above")
)

# Run the batch processing function
results <- margot_subset_batch(model_results, X, base_defaults,
                                     "Example Title", label_mapping, subsets)
}

}
