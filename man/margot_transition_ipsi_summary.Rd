% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot_transition_ipsi_summary.R
\name{margot_transition_ipsi_summary}
\alias{margot_transition_ipsi_summary}
\title{Summarize IPSI probabilities from transition tables}
\usage{
margot_transition_ipsi_summary(
  transitions,
  deltas = c(2, 5, 10),
  pretty = FALSE,
  digits_prob = 1,
  digits_fold = 1
)
}
\arguments{
\item{transitions}{Either the object returned by `margot_transition_table()`
or a list of transition matrices (data frames or `knitr_kable`s containing
`"From / To"`, `"State 1"`, and `"Total"` columns). When an object from
`margot_transition_table()` is supplied, the stored wave labels are used in
the summary.}

\item{deltas}{Numeric vector of IPSI scaling factors (greater than 1). Passed
to `margot_compute_ipsi_probability()`; defaults to the standard set
`c(2, 5, 10)`.}

\item{pretty}{Logical; if `TRUE`, the table component is formatted for
`knitr::kable()` / `kbl()` while numeric values remain attached under
`attr(table, "raw")`.}

\item{digits_prob}{Integer digits for percentage columns when `pretty = TRUE`.}

\item{digits_fold}{Integer digits for fold-increase columns when `pretty = TRUE`.}
}
\value{
A list with two elements:
  \describe{
    \item{`table`}{Data frame with one row per wave pair Ã— delta containing
      the natural initiation rate (with 95% CI), counterfactual probabilities,
      fold increases, and raw counts (string-formatted when `pretty = TRUE`).}
    \item{`report`}{Character vector of NZ-English sentences, with LaTeX math
      markup (e.g., `$\\to$`, `$\\delta$`, `$p'$`), summarising each wave pair.}
  }
}
\description{
Consumes the output of `margot_transition_table()` (or a compatible list of
transition matrices) and computes initiation probabilities for each wave pair
under incremental propensity score interventions (IPSIs). Internally it calls
`margot_compute_ipsi_probability()` for every matrix, returning a tidy data
frame that includes the natural initiation rate, counterfactual probabilities,
fold increases, and the raw counts used in each estimate.
}
\examples{
transitions <- margot_transition_table(
  data.frame(
    id = rep(1:3, each = 3),
    wave = rep(c(2018, 2019, 2022), 3),
    religion = c(0, 0, 1,
                 0, 1, 1,
                 1, 1, 1),
    observed = 1
  ),
  state_var = "religion",
  id_var = "id",
  wave_var = "wave",
  observed_var = "observed",
  observed_val = 1,
  waves = c(2018, 2019, 2022)
)

margot_transition_ipsi_summary(transitions)

}
