<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create Faceted Tau Hat Distribution Plots — margot_plot_tau • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create Faceted Tau Hat Distribution Plots — margot_plot_tau"><meta name="description" content="creates a faceted grid of histograms showing the distribution of tau hat
(individual treatment effects) for multiple models. the range is standardised
across all facets to facilitate comparison. automatically detects and handles
models_binary structures by extracting the $results component."><meta property="og:description" content="creates a faceted grid of histograms showing the distribution of tau hat
(individual treatment effects) for multiple models. the range is standardised
across all facets to facilitate comparison. automatically detects and handles
models_binary structures by extracting the $results component."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.246</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create Faceted Tau Hat Distribution Plots</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_plot_tau.R" class="external-link"><code>R/margot_plot_tau.R</code></a></small>
      <div class="d-none name"><code>margot_plot_tau.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>creates a faceted grid of histograms showing the distribution of tau hat
(individual treatment effects) for multiple models. the range is standardised
across all facets to facilitate comparison. automatically detects and handles
models_binary structures by extracting the $results component.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_plot_tau</span><span class="op">(</span></span>
<span>  <span class="va">models_list</span>,</span>
<span>  label_mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  binwidth <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  base_size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>  ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subtitle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  x_label <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="va">tau</span><span class="op">[</span><span class="va">i</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  show_zero_line <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  fill_colour <span class="op">=</span> <span class="st">"white"</span>,</span>
<span>  border_colour <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  colour_by_sign <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  colour_below <span class="op">=</span> <span class="st">"#4f88c6"</span>,</span>
<span>  colour_above <span class="op">=</span> <span class="st">"#d8a739"</span>,</span>
<span>  zero_line_colour <span class="op">=</span> <span class="st">"red"</span>,</span>
<span>  zero_line_alpha <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  remove_tx_prefix <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_z_suffix <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  use_title_case <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  remove_underscores <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  free_scales <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  theme <span class="op">=</span> <span class="st">"void"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-models-list">models_list<a class="anchor" aria-label="anchor" href="#arg-models-list"></a></dt>
<dd><p>list of models or results object containing models with
tau_hat values. can be a nested list structure like
`models_binary$results`, or the parent `models_binary` object itself
(in which case `$results` will be extracted automatically).</p></dd>


<dt id="arg-label-mapping">label_mapping<a class="anchor" aria-label="anchor" href="#arg-label-mapping"></a></dt>
<dd><p>optional named list for transforming model names to
display labels. if null, uses automatic label transformation.</p></dd>


<dt id="arg-binwidth">binwidth<a class="anchor" aria-label="anchor" href="#arg-binwidth"></a></dt>
<dd><p>numeric; width of histogram bins. default 0.01.</p></dd>


<dt id="arg-base-size">base_size<a class="anchor" aria-label="anchor" href="#arg-base-size"></a></dt>
<dd><p>numeric; base font size for the plot. default 14.</p></dd>


<dt id="arg-ncol">ncol<a class="anchor" aria-label="anchor" href="#arg-ncol"></a></dt>
<dd><p>integer; number of columns in facet grid. if null, automatically
determined based on number of models.</p></dd>


<dt id="arg-title">title<a class="anchor" aria-label="anchor" href="#arg-title"></a></dt>
<dd><p>character; main title for the plot. default null.</p></dd>


<dt id="arg-subtitle">subtitle<a class="anchor" aria-label="anchor" href="#arg-subtitle"></a></dt>
<dd><p>character; subtitle for the plot. default null.</p></dd>


<dt id="arg-x-label">x_label<a class="anchor" aria-label="anchor" href="#arg-x-label"></a></dt>
<dd><p>character; label for x-axis. default uses expression for tau.</p></dd>


<dt id="arg-show-zero-line">show_zero_line<a class="anchor" aria-label="anchor" href="#arg-show-zero-line"></a></dt>
<dd><p>logical; whether to show vertical line at zero. default true.</p></dd>


<dt id="arg-fill-colour">fill_colour<a class="anchor" aria-label="anchor" href="#arg-fill-colour"></a></dt>
<dd><p>character; fill colour for histogram bars when colour_by_sign is false. default "white".</p></dd>


<dt id="arg-border-colour">border_colour<a class="anchor" aria-label="anchor" href="#arg-border-colour"></a></dt>
<dd><p>character; border colour for histogram bars. default NA (no border).</p></dd>


<dt id="arg-colour-by-sign">colour_by_sign<a class="anchor" aria-label="anchor" href="#arg-colour-by-sign"></a></dt>
<dd><p>logical; whether to colour bars differently above/below zero. default true.</p></dd>


<dt id="arg-colour-below">colour_below<a class="anchor" aria-label="anchor" href="#arg-colour-below"></a></dt>
<dd><p>character; colour for bars below zero when colour_by_sign is true. default "#4f88c6".</p></dd>


<dt id="arg-colour-above">colour_above<a class="anchor" aria-label="anchor" href="#arg-colour-above"></a></dt>
<dd><p>character; colour for bars above zero when colour_by_sign is true. default "#d8a739".</p></dd>


<dt id="arg-zero-line-colour">zero_line_colour<a class="anchor" aria-label="anchor" href="#arg-zero-line-colour"></a></dt>
<dd><p>character; colour for zero line. default "red".</p></dd>


<dt id="arg-zero-line-alpha">zero_line_alpha<a class="anchor" aria-label="anchor" href="#arg-zero-line-alpha"></a></dt>
<dd><p>numeric; transparency for zero line. default 0.5.</p></dd>


<dt id="arg-remove-tx-prefix">remove_tx_prefix<a class="anchor" aria-label="anchor" href="#arg-remove-tx-prefix"></a></dt>
<dd><p>logical; remove time prefixes from model names. default true.</p></dd>


<dt id="arg-remove-z-suffix">remove_z_suffix<a class="anchor" aria-label="anchor" href="#arg-remove-z-suffix"></a></dt>
<dd><p>logical; remove _z suffix from model names. default true.</p></dd>


<dt id="arg-use-title-case">use_title_case<a class="anchor" aria-label="anchor" href="#arg-use-title-case"></a></dt>
<dd><p>logical; convert labels to title case. default true.</p></dd>


<dt id="arg-remove-underscores">remove_underscores<a class="anchor" aria-label="anchor" href="#arg-remove-underscores"></a></dt>
<dd><p>logical; replace underscores with spaces. default true.</p></dd>


<dt id="arg-free-scales">free_scales<a class="anchor" aria-label="anchor" href="#arg-free-scales"></a></dt>
<dd><p>logical; whether to allow free scales in facets. default false
to maintain fixed range across all facets.</p></dd>


<dt id="arg-theme">theme<a class="anchor" aria-label="anchor" href="#arg-theme"></a></dt>
<dd><p>character; ggplot2 theme to use. options include "classic", "minimal",
"bw", "light", "dark", "void", "grey", "linedraw". default "void".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a ggplot object with faceted tau hat distributions</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># with label mapping - pass models_binary directly</span></span></span>
<span class="r-in"><span><span class="va">label_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"model_t2_belong_z"</span> <span class="op">=</span> <span class="st">"Social Belonging"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"model_t2_trust_z"</span> <span class="op">=</span> <span class="st">"Trust in Others"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"model_t2_log_charity_donate_z"</span> <span class="op">=</span> <span class="st">"Charitable Donations"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"model_t2_log_hours_charity_z"</span> <span class="op">=</span> <span class="st">"Volunteer Hours"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># method 1: pass the parent object (auto-extracts $results)</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Individual Treatment Effects"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># method 2: pass $results directly (also works)</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span><span class="op">$</span><span class="va">results</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Individual Treatment Effects"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with different theme</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Individual Treatment Effects"</span>,</span></span>
<span class="r-in"><span>  theme <span class="op">=</span> <span class="st">"minimal"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># without conditional colouring</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Individual Treatment Effects"</span>,</span></span>
<span class="r-in"><span>  colour_by_sign <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  fill_colour <span class="op">=</span> <span class="st">"lightblue"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># with custom colours for above/below zero</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  title <span class="op">=</span> <span class="st">"Individual Treatment Effects"</span>,</span></span>
<span class="r-in"><span>  colour_below <span class="op">=</span> <span class="st">"darkred"</span>,</span></span>
<span class="r-in"><span>  colour_above <span class="op">=</span> <span class="st">"darkgreen"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># add borders if desired</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="va">label_map</span>,</span></span>
<span class="r-in"><span>  border_colour <span class="op">=</span> <span class="st">"grey50"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># without label mapping (auto transform)</span></span></span>
<span class="r-in"><span><span class="va">tau_plot</span> <span class="op">&lt;-</span> <span class="fu">margot_plot_tau</span><span class="op">(</span><span class="va">models_binary</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

