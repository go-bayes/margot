<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate Methods Section for a Causal Inference Study — boilerplate_methods • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate Methods Section for a Causal Inference Study — boilerplate_methods"><meta name="description" content="This function generates a comprehensive methods section for a research paper,
including details about the sample, variables, causal interventions,
identification assumptions, target population, eligibility criteria,
confounding control, missing data handling, statistical estimators,
and additional sections like sensitivity analysis and scope of interventions."><meta property="og:description" content="This function generates a comprehensive methods section for a research paper,
including details about the sample, variables, causal interventions,
identification assumptions, target population, eligibility criteria,
confounding control, missing data handling, statistical estimators,
and additional sections like sensitivity analysis and scope of interventions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.9</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate Methods Section for a Causal Inference Study</h1>

      <div class="d-none name"><code>boilerplate_methods.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function generates a comprehensive methods section for a research paper,
including details about the sample, variables, causal interventions,
identification assumptions, target population, eligibility criteria,
confounding control, missing data handling, statistical estimators,
and additional sections like sensitivity analysis and scope of interventions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">boilerplate_methods</span><span class="op">(</span></span>
<span>  <span class="va">exposure_var</span>,</span>
<span>  <span class="va">outcome_vars</span>,</span>
<span>  <span class="va">n_total</span>,</span>
<span>  <span class="va">baseline_wave</span>,</span>
<span>  <span class="va">exposure_wave</span>,</span>
<span>  <span class="va">outcome_wave</span>,</span>
<span>  <span class="va">baseline_missing_data_proportion</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-exposure-var">exposure_var<a class="anchor" aria-label="anchor" href="#arg-exposure-var"></a></dt>
<dd><p>Character string specifying the primary exposure variable.</p></dd>


<dt id="arg-outcome-vars">outcome_vars<a class="anchor" aria-label="anchor" href="#arg-outcome-vars"></a></dt>
<dd><p>Character vector specifying the outcome variables.</p></dd>


<dt id="arg-n-total">n_total<a class="anchor" aria-label="anchor" href="#arg-n-total"></a></dt>
<dd><p>Numeric value indicating the total number of participants in the study.</p></dd>


<dt id="arg-baseline-wave">baseline_wave<a class="anchor" aria-label="anchor" href="#arg-baseline-wave"></a></dt>
<dd><p>Character string specifying the baseline wave of the study.</p></dd>


<dt id="arg-exposure-wave">exposure_wave<a class="anchor" aria-label="anchor" href="#arg-exposure-wave"></a></dt>
<dd><p>Character string specifying the exposure wave of the study.</p></dd>


<dt id="arg-outcome-wave">outcome_wave<a class="anchor" aria-label="anchor" href="#arg-outcome-wave"></a></dt>
<dd><p>Character string specifying the outcome wave of the study.</p></dd>


<dt id="arg-baseline-missing-data-proportion">baseline_missing_data_proportion<a class="anchor" aria-label="anchor" href="#arg-baseline-missing-data-proportion"></a></dt>
<dd><p>Numeric value indicating the proportion of missing data at baseline.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to be passed to helper functions.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character string containing the generated methods section in markdown format.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">methods_text</span> <span class="op">&lt;-</span> <span class="fu">boilerplate_methods</span><span class="op">(</span></span></span>
<span class="r-in"><span>  exposure_var <span class="op">=</span> <span class="st">"political_conservative"</span>,</span></span>
<span class="r-in"><span>  outcome_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"religion_identification_level"</span>, <span class="st">"rumination"</span>, <span class="st">"self_esteem"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  n_total <span class="op">=</span> <span class="fl">47000</span>,</span></span>
<span class="r-in"><span>  baseline_wave <span class="op">=</span> <span class="st">"NZAVS time 10, years 2018-2019"</span>,</span></span>
<span class="r-in"><span>  exposure_wave <span class="op">=</span> <span class="st">"NZAVS time 11, years 2019-2020"</span>,</span></span>
<span class="r-in"><span>  outcome_wave <span class="op">=</span> <span class="st">"NZAVS time 12, years 2020-2021"</span>,</span></span>
<span class="r-in"><span>  baseline_missing_data_proportion <span class="op">=</span> <span class="fl">0.15</span>,</span></span>
<span class="r-in"><span>  causal_interventions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>interventions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Increase exposure_var"</span>, <span class="st">"Do not change exposure_var"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  contrasts <span class="op">=</span> <span class="st">"null"</span>,</span></span>
<span class="r-in"><span>  null_intervention <span class="op">=</span> <span class="st">"Do not change exposure_var"</span>,</span></span>
<span class="r-in"><span>  sample <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>appendices <span class="op">=</span> <span class="st">"A-C"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  statistical_estimator <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>estimators <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"lmtp"</span>, <span class="st">"grf"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  inclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Enrolled in the 2018 wave of the New Zealand Attitudes and Values Study (NZAVS time 10)."</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Missing covariate data at baseline was permitted, and the data was subjected to imputation methods to reduce bias."</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  exclusion_criteria <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Did not answer the religious service attendance question at NZAVS time 10 and time 11."</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  n_participants <span class="op">=</span> <span class="fl">32451</span>,</span></span>
<span class="r-in"><span>  confounding_control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>appendix_ref <span class="op">=</span> <span class="st">"B"</span>, protocol_url <span class="op">=</span> <span class="st">"https://osf.io/ce4t9/"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  additional_sections <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    sensitivity_analysis <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      description <span class="op">=</span> <span class="st">"We use the E-value method to assess sensitivity to unmeasured confounding."</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    scope_interventions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>figure_ref <span class="op">=</span> <span class="st">"@fig-custom-hist"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    evidence_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>table_ref <span class="op">=</span> <span class="st">"@tbl-custom-transition"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Error in boilerplate_methods_target_population : the condition has length &gt; 1</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Error in boilerplate_methods_additional_sections : Failed to evaluate glue component {sensitivity_analysis$description}</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">methods_text</span><span class="op">)</span> <span class="co"># print</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Sample</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data were collected by the New Zealand Attitudes and Values Study (NZAVS), an annual longitudinal national probability panel study of social attitudes, personality, ideology, and health outcomes in New Zealand. Chris G. Sibley started the New Zealand Attitudes and Values Study in 2009, which has grown to include a community of over fifty researchers. Since its inception, the New Zealand Attitudes and Values Study has accumulated questionnaire responses from 47000 New Zealand residents. The study operates independently of political or corporate funding and is based in a university setting. Data summaries for our study sample on all measures used in this study are found in **Appendices B-D**. For more details about the New Zealand Attitudes and Values Study see: [OSF.IO/75SNB](https://doi.org/10.17605/OSF.IO/75SNB). Here, our study uses data from NZAVS time 10, years 2018-2019, NZAVS time 11, years 2019-2020, NZAVS time 12, years 2020-2021</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## Variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Exposure Variable</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The primary exposure variable in this study is 'political_conservative'.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Outcome Variables</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The outcome variables examined in this study are:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -  religion_identification_level</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -  rumination</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -  self_esteem</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Detailed descriptions of how these variables were measured and operationalized can be found in the study protocol.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ## Causal Interventions and Contrasts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Interventions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This study considers the following causal interventions on the exposure variable 'political_conservative':</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -  Increase political_conservative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -  Do not change political_conservative</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Contrasts</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We will compare each intervention to the null intervention: "Do not change political_conservative". This approach allows us to evaluate the effect of each intervention relative to a baseline scenario.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This approach to defining interventions and contrasts allows us to systematically evaluate the causal effects of interest in our study.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Identification Assumptions</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This study relies on the following key identification assumptions for estimating the causal effect of political_conservative:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1. **Consistency**: The observed outcome under the observed political_conservative is equal to the potential outcome under that exposure level.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2. **Positivity**: There is a non-zero probability of receiving each level of political_conservative for every combination of values of political_conservative and confounders in the population.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3. **No unmeasured confounding**: All variables that affect both political_conservative and the outcome have been measured and accounted for in the analysis.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4. **No interference**: The potential outcomes for one individual are not affected by the political_conservative status of other individuals.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> These assumptions are critical for the causal interpretability of our results and should be carefully considered in light of the study design and available data.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Eligibility Criteria</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To be included in the analysis of this study, participants needed to meet the following eligibility criteria:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #### Inclusion Criteria</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Enrolled in the 2018 wave of the New Zealand Attitudes and Values Study (NZAVS time 10).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Missing covariate data at baseline was permitted, and the data was subjected to imputation methods to reduce bias.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Participants may have been lost to follow-up at the end of the study if they met eligibility criteria at NZAVS time 10, years 2018-2019. We adjusted for attrition and non-response using censoring weights, described below.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> #### Exclusion Criteria</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> - Did not answer the religious service attendance question at NZAVS time 10 and time 11.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A total of 32451 individuals met these criteria and were included in the study.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Confounding Control</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To manage confounding in our analysis, we implement [@vanderweele2019]'s *modified disjunctive cause criterion* by following these steps:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1. **Identified all common causes** of both the treatment and outcomes.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2. **Excluded instrumental variables** that affect the exposure but not the outcome. Instrumental variables do not contribute to controlling confounding and can reduce the efficiency of the estimates.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3. **Included proxies for unmeasured confounders** affecting both exposure and outcome. According to the principles of d-separation @pearl2009a, using proxies allows us to control for their associated unmeasured confounders indirectly.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4. **Controlled for baseline exposure** and **baseline outcome**. Both are used as proxies for unmeasured common causes, enhancing the robustness of our causal estimates, refer to @vanderweele2020.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [Appendix B](#appendix-demographics) details the covariates we included for confounding control. These methods adhere to the guidelines provided in [@bulbulia2024PRACTICAL] and were pre-specified in our study protocol [https://osf.io/ce4t9/](https://osf.io/ce4t9/).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Missing Data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> To mitigate bias from missing data, we implement the following strategies:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> **Baseline missingness**: we employed the `ppm` algorithm from the `mice` package in R [@vanbuuren2018] to impute missing baseline data (wave NZAVS time 10, years 2018-2019). This method allowed us to reconstruct incomplete datasets by estimating a plausible value for missing observation. Because we could only pass one data set to the lmtp, we employed single imputation. Approximately 0.15% of covariate values were missing at NZAVS time 10, years 2018-2019. We only used baseline data to impute baseline wave missingness (refer to @zhang2023shouldMultipleImputation).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> **Outcome missingness**: to address confounding and selection bias arising from missing responses and panel attrition at the end of study NZAVS time 12, years 2020-2021, we applied censoring weights obtained using nonparametric machine learning ensembles afforded by the `lmtp` package (and its dependencies) in R [@williams2021].</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The GRF package accepts missing values at baseline. To obtain valid inference for missing responses we computed inverse probability of censoring weights. See Appendix C.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Statistical Estimator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Longitudinal Modified Treatment Policy (LMTP) Estimator</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We perform statistical estimation using a semi-parametric Targeted Minimum Loss-based Estimation (TMLE) approach, specifically the Longitudinal Modified Treatment Policy (LMTP) estimator. TMLE is a robust method for estimating causal effects while providing valid statistical uncertainty measures [@van2014targeted; @van2012targeted].</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TMLE operates through a two-step process:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1. **Initial Modeling:** TMLE models the relationship between treatments, covariates, and outcomes. We employ machine learning algorithms for this step, allowing us to flexibly model complex, high-dimensional covariate spaces without imposing restrictive model assumptions [@van2014discussion; @vanderlaan2011; @vanderlaan2018]. This results in a set of initial estimates for these relationships.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2. **Targeting:** TMLE 'targets' these initial estimates by incorporating information about the observed data distribution to improve the accuracy of the causal effect estimate. This iterative updating process adjusts the initial estimates towards the true causal effect, guided by the efficient influence function.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> TMLE offers several advantages for causal inference:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1. Double robust estimation: the estimator is consistent if either the outcome model or the treatment mechanism model is correctly specified (but not necessarily both);</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2. Efficiency in the presence of time-varying confounding;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3. Ability to handle complex longitudinal data structures and time-varying treatments;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4. Flexibility in specifying dynamic treatment regimes;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5. Compatibility with machine learning methods for initial estimation steps;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6. Handling of missing data from attrition, loss-to-follow up using inverse-probability of censoring weighting.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We use cross-validation to avoid overfitting, following pre-stated protocols [@bulbulia2024PRACTICAL]. The integration of TMLE and machine learning reduces dependence on restrictive modeling assumptions and introduces an additional layer of robustness.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We perform estimation using the `lmtp` package [@williams2021]. We use the `superlearner` library for semi-parametric estimation with the predefined libraries `SL.ranger`, `SL.glmnet`, and `SL.xgboost` [@polley2023; @xgboost2023; @Ranger2017]. For further details on targeted learning using the `lmtp` package, see [@hoffman2022; @hoffman2023; @díaz2021]. Graphs, tables, and output reports are created using the `margot` package [@margot2024].</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ### Generalized Random Forests (GRF)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> In this study, we employ Generalized Random Forests (GRF) to estimate causal effects, using the grf package [@grf2024]. GRF extends the random forest algorithm to estimate heterogeneous treatment effects, providing a non-parametric approach to causal inference. This method allows us to estimate conditional average treatment effects (CATE) across different subgroups or individual characteristics.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> GRF offers several advantages for causal inference:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1. Complex, non-linear relationships: GRF can model intricate interactions between covariates and treatment effects without requiring pre-specification.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2. Heterogeneous treatment effects: The method allows exploration of how treatment effects vary across different subgroups or individual characteristics.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3. Variable importance measures: GRF provides insights into which variables most influence treatment effects.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4. Flexibility with outcome types: It can handle continuous, binary, and time-to-event outcomes without assuming specific data distributions.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5. Double robustness: GRF estimates remain consistent if either the outcome model or the propensity score model is correctly specified (but not necessarily both).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6. Out-of-bag predictions: By using out-of-bag samples for fitting, GRF helps prevent overfitting and provides honest treatment effect estimates.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The GRF method combines machine learning flexibility with statistical inference rigor, making it particularly useful in complex settings where treatment effects may vary across subpopulations or when relationships between covariates and outcomes are expected to be non-linear.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> In our analysis:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We use the `maq `package [@maq_package_2024] to assess treatment heterogeneity.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We evaluate optimal policies using the `policytree` package [@policytree_package_2024; @athey_2021_policy_tree_econometrica].</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> We visualize policy predictions on held-out data using the `margot` package [@margot2024].</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> By employing GRF, we can estimate both average treatment effects and explore how these effects differ across various subgroups or individual characteristics, providing clearer insight into causal relationships in the target population.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

