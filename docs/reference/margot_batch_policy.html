<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply Policy Tree Analysis to Multiple Models — margot_batch_policy • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply Policy Tree Analysis to Multiple Models — margot_batch_policy"><meta name="description" content="This function applies policy tree analysis to multiple models contained within a single
results object. It generates policy tree plots, interpretations, Qini plots, decision tree
visualizations, policy combo plots, and difference gain summaries for each model. It also
provides options for saving the generated plots."><meta property="og:description" content="This function applies policy tree analysis to multiple models contained within a single
results object. It generates policy tree plots, interpretations, Qini plots, decision tree
visualizations, policy combo plots, and difference gain summaries for each model. It also
provides options for saving the generated plots."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.55</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Apply Policy Tree Analysis to Multiple Models</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_batch_policy.R" class="external-link"><code>R/margot_batch_policy.R</code></a></small>
      <div class="d-none name"><code>margot_batch_policy.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function applies policy tree analysis to multiple models contained within a single
results object. It generates policy tree plots, interpretations, Qini plots, decision tree
visualizations, policy combo plots, and difference gain summaries for each model. It also
provides options for saving the generated plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_batch_policy</span><span class="op">(</span></span>
<span>  <span class="va">result_outcomes</span>,</span>
<span>  policy_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  decision_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  dpi <span class="op">=</span> <span class="fl">300</span>,</span>
<span>  width <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  height <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  save_plots <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  output_dir <span class="op">=</span> <span class="va">push_mods</span>,</span>
<span>  spend <span class="op">=</span> <span class="fl">0.2</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-result-outcomes">result_outcomes<a class="anchor" aria-label="anchor" href="#arg-result-outcomes"></a></dt>
<dd><p>A list containing the results of multiple models.
This object should have a structure similar to the output of a multi-arm
causal forest model, with a `results` element containing named model results.</p></dd>


<dt id="arg-policy-tree-args">policy_tree_args<a class="anchor" aria-label="anchor" href="#arg-policy-tree-args"></a></dt>
<dd><p>A list of arguments to be passed to `margot_plot_policy_tree()`.</p></dd>


<dt id="arg-decision-tree-args">decision_tree_args<a class="anchor" aria-label="anchor" href="#arg-decision-tree-args"></a></dt>
<dd><p>A list of arguments to be passed to `margot_plot_decision_tree()`.</p></dd>


<dt id="arg-dpi">dpi<a class="anchor" aria-label="anchor" href="#arg-dpi"></a></dt>
<dd><p>The resolution in dots per inch for saved plots. Default is 600.</p></dd>


<dt id="arg-width">width<a class="anchor" aria-label="anchor" href="#arg-width"></a></dt>
<dd><p>The width of the saved plots in inches. Default is 12.</p></dd>


<dt id="arg-height">height<a class="anchor" aria-label="anchor" href="#arg-height"></a></dt>
<dd><p>The height of the saved plots in inches. Default is 12.</p></dd>


<dt id="arg-save-plots">save_plots<a class="anchor" aria-label="anchor" href="#arg-save-plots"></a></dt>
<dd><p>Logical; if TRUE, plots will be saved to disk. Default is TRUE.</p></dd>


<dt id="arg-output-dir">output_dir<a class="anchor" aria-label="anchor" href="#arg-output-dir"></a></dt>
<dd><p>The directory where plots should be saved. Default is "push_mods".</p></dd>


<dt id="arg-spend">spend<a class="anchor" aria-label="anchor" href="#arg-spend"></a></dt>
<dd><p>A numeric value between 0 and 1 specifying the spend level for difference gain calculations. Default is 0.2.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list where each element corresponds to a model in the input
  `result_outcomes`. Each element is itself a list containing:</p>
<dl><dt>policy_tree_plot</dt>
<dd><p>A ggplot object of the policy tree plot</p></dd>

  <dt>policy_tree_interpretation</dt>
<dd><p>A character string interpreting the policy tree</p></dd>

  <dt>qini_plot</dt>
<dd><p>A ggplot object of the Qini plot</p></dd>

  <dt>decision_tree_visualisation</dt>
<dd><p>A ggplot object visualizing the decision tree</p></dd>

  <dt>policy_combo_plot</dt>
<dd><p>A ggplot object of the policy combo plot</p></dd>

  <dt>diff_gain_summary</dt>
<dd><p>For binary treatments, a list containing difference gain summary</p></dd>

  <dt>diff_gain_summaries</dt>
<dd><p>For multi-arm treatments, a list of difference gain summaries for each arm and all_arms</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example for binary treatment</span></span></span>
<span class="r-in"><span><span class="va">binary_results</span> <span class="op">&lt;-</span> <span class="fu">margot_batch_policy</span><span class="op">(</span></span></span>
<span class="r-in"><span>  result_outcomes <span class="op">=</span> <span class="va">cf_results</span>,</span></span>
<span class="r-in"><span>  policy_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>point_alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dpi <span class="op">=</span> <span class="fl">300</span>,</span></span>
<span class="r-in"><span>  width <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  save_plots <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"output_plots_binary"</span>,</span></span>
<span class="r-in"><span>  spend <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access results for a specific binary model</span></span></span>
<span class="r-in"><span><span class="va">binary_model_results</span> <span class="op">&lt;-</span> <span class="va">binary_results</span><span class="op">$</span><span class="va">model_t2_binary</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binary_model_results</span><span class="op">$</span><span class="va">diff_gain_summary</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example for multi-arm treatment</span></span></span>
<span class="r-in"><span><span class="va">multi_arm_results</span> <span class="op">&lt;-</span> <span class="fu">margot_batch_policy</span><span class="op">(</span></span></span>
<span class="r-in"><span>  result_outcomes <span class="op">=</span> <span class="va">mc_results</span>,</span></span>
<span class="r-in"><span>  policy_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>point_alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  decision_tree_args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>text_size <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  dpi <span class="op">=</span> <span class="fl">300</span>,</span></span>
<span class="r-in"><span>  width <span class="op">=</span> <span class="fl">12</span>,</span></span>
<span class="r-in"><span>  height <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  save_plots <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  output_dir <span class="op">=</span> <span class="st">"output_plots_multi_arm"</span>,</span></span>
<span class="r-in"><span>  spend <span class="op">=</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Access results for a specific multi-arm model</span></span></span>
<span class="r-in"><span><span class="va">multi_arm_model_results</span> <span class="op">&lt;-</span> <span class="va">multi_arm_results</span><span class="op">$</span><span class="va">model_t2_multi_arm</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">multi_arm_model_results</span><span class="op">$</span><span class="va">diff_gain_summaries</span><span class="op">$</span><span class="va">all_arms</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">multi_arm_model_results</span><span class="op">$</span><span class="va">diff_gain_summaries</span><span class="op">$</span><span class="va">arm1</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The plots are saved in the specified output directories</span></span></span>
<span class="r-in"><span><span class="co"># You can also access the plot objects directly:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">binary_model_results</span><span class="op">$</span><span class="va">policy_tree_plot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">multi_arm_model_results</span><span class="op">$</span><span class="va">qini_plot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

