<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a Margot Plot with Interpretation and Transformed Table — margot_plot • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a Margot Plot with Interpretation and Transformed Table — margot_plot"><meta name="description" content="This function creates a Margot plot, which is useful for visualizing causal effects
in epidemiological studies. It provides various options for customizing the plot
and transforming labels. Additionally, it generates an interpretation of the results
using the margot_interpret_marginal function and returns a transformed table."><meta property="og:description" content="This function creates a Margot plot, which is useful for visualizing causal effects
in epidemiological studies. It provides various options for customizing the plot
and transforming labels. Additionally, it generates an interpretation of the results
using the margot_interpret_marginal function and returns a transformed table."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1.61</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a Margot Plot with Interpretation and Transformed Table</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_plot.R" class="external-link"><code>R/margot_plot.R</code></a></small>
      <div class="d-none name"><code>margot_plot.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function creates a Margot plot, which is useful for visualizing causal effects
in epidemiological studies. It provides various options for customizing the plot
and transforming labels. Additionally, it generates an interpretation of the results
using the margot_interpret_marginal function and returns a transformed table.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_plot</span><span class="op">(</span></span>
<span>  <span class="va">.data</span>,</span>
<span>  type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"RD"</span>, <span class="st">"RR"</span><span class="op">)</span>,</span>
<span>  order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"default"</span>, <span class="st">"alphabetical"</span><span class="op">)</span>,</span>
<span>  title_binary <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  label_mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_output <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use_timestamp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  base_filename <span class="op">=</span> <span class="st">"margot_plot_output"</span>,</span>
<span>  prefix <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save_path <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"push_mods"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--data">.data<a class="anchor" aria-label="anchor" href="#arg--data"></a></dt>
<dd><p>A data frame containing the data to be plotted.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Character string specifying the type of plot. Either "RD" (Risk Difference) or "RR" (Risk Ratio).</p></dd>


<dt id="arg-order">order<a class="anchor" aria-label="anchor" href="#arg-order"></a></dt>
<dd><p>Character string specifying the order of outcomes. Either "default" or "alphabetical".</p></dd>


<dt id="arg-title-binary">title_binary<a class="anchor" aria-label="anchor" href="#arg-title-binary"></a></dt>
<dd><p>Optional title for the plot.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to the plotting function.</p></dd>


<dt id="arg-options">options<a class="anchor" aria-label="anchor" href="#arg-options"></a></dt>
<dd><p>A list of additional options for customizing the plot and interpretation. See Details for available options.</p></dd>


<dt id="arg-label-mapping">label_mapping<a class="anchor" aria-label="anchor" href="#arg-label-mapping"></a></dt>
<dd><p>A named list for custom outcome label mapping. See Details for usage.</p></dd>


<dt id="arg-save-output">save_output<a class="anchor" aria-label="anchor" href="#arg-save-output"></a></dt>
<dd><p>Logical. If TRUE, saves the complete output to a file. Default is FALSE.</p></dd>


<dt id="arg-use-timestamp">use_timestamp<a class="anchor" aria-label="anchor" href="#arg-use-timestamp"></a></dt>
<dd><p>Logical. If TRUE, adds a timestamp to the saved filename. Default is FALSE.</p></dd>


<dt id="arg-base-filename">base_filename<a class="anchor" aria-label="anchor" href="#arg-base-filename"></a></dt>
<dd><p>Character string. The base name for the saved file. Default is "margot_plot_output".</p></dd>


<dt id="arg-prefix">prefix<a class="anchor" aria-label="anchor" href="#arg-prefix"></a></dt>
<dd><p>Character string. An optional prefix for the saved filename. Default is NULL.</p></dd>


<dt id="arg-save-path">save_path<a class="anchor" aria-label="anchor" href="#arg-save-path"></a></dt>
<dd><p>Character string. The directory path where the output will be saved. Default is here::here("push_mods").</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing three elements:</p><ul><li><p>`plot`: A ggplot object representing the Margot plot.</p></li>
<li><p>`interpretation`: A character string containing the interpretation of the results, with the same formatting applied as the plot labels.</p></li>
<li><p>`transformed_table`: A data frame with the original data and transformed row names, using the same transformation options as the plot labels.</p></li>
</ul><p>If `save_output` is TRUE, the complete output will be saved to a file using margot::here_save_qs().</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The `options` list can include the following parameters:</p><ul><li><p>`remove_tx_prefix`: Logical. If TRUE, removes "tx_" prefix from labels and interpretation. Default is TRUE.</p></li>
<li><p>`remove_z_suffix`: Logical. If TRUE, removes "_z" suffix from labels and interpretation. Default is TRUE.</p></li>
<li><p>`use_title_case`: Logical. If TRUE, converts labels and interpretation to title case. Default is TRUE.</p></li>
<li><p>`remove_underscores`: Logical. If TRUE, removes underscores from labels and interpretation. Default is TRUE.</p></li>
<li><p>`show_evalues`: Logical. If TRUE, shows E-values in the plot. Default is TRUE.</p></li>
<li><p>`evalue_digits`: Integer. Number of digits for E-value display. Default is 2.</p></li>
</ul><p>The `label_mapping` parameter allows for custom renaming of specific outcomes:</p><ul><li><p>It should be a named list where names are original outcome labels and values are new labels.</p></li>
<li><p>Outcomes not specified in `label_mapping` will use default transformations based on `options`.</p></li>
<li><p>Custom mapped labels are used as-is, without applying default transformations.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Create sample data</span></span></span>
<span class="r-in"><span><span class="va">sample_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  outcome <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"t1_outcome_a_z"</span>, <span class="st">"t2_outcome_b_z"</span>, <span class="st">"t3_outcome_c_z"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  `E[Y(1)]-E[Y(0)]` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="op">-</span><span class="fl">0.2</span>, <span class="fl">0.3</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  `2.5 %` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="op">-</span><span class="fl">0.3</span>, <span class="fl">0.2</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  `97.5 %` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.15</span>, <span class="op">-</span><span class="fl">0.1</span>, <span class="fl">0.4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  E_Value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.5</span>, <span class="fl">1.8</span>, <span class="fl">2.0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  E_Val_bound <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1.3</span>, <span class="fl">1.5</span>, <span class="fl">1.7</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a basic Margot plot with interpretation and transformed table</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">margot_plot</span><span class="op">(</span><span class="va">sample_data</span>, type <span class="op">=</span> <span class="st">"RD"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">plot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">interpretation</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">result</span><span class="op">$</span><span class="va">transformed_table</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a Margot plot with custom options, label mapping, and save output</span></span></span>
<span class="r-in"><span><span class="va">custom_result</span> <span class="op">&lt;-</span> <span class="fu">margot_plot</span><span class="op">(</span><span class="va">sample_data</span>,</span></span>
<span class="r-in"><span>  type <span class="op">=</span> <span class="st">"RD"</span>,</span></span>
<span class="r-in"><span>  title_binary <span class="op">=</span> <span class="st">"Custom Margot Plot"</span>,</span></span>
<span class="r-in"><span>  options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    remove_tx_prefix <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    remove_z_suffix <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    use_title_case <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    remove_underscores <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  label_mapping <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"t1_outcome_a_z"</span> <span class="op">=</span> <span class="st">"Custom Label A"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"t2_outcome_b_z"</span> <span class="op">=</span> <span class="st">"Custom Label B"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  save_output <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  use_timestamp <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  prefix <span class="op">=</span> <span class="st">"custom"</span>,</span></span>
<span class="r-in"><span>  save_path <span class="op">=</span> <span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"output"</span>, <span class="st">"margot_plots"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">custom_result</span><span class="op">$</span><span class="va">plot</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="va">custom_result</span><span class="op">$</span><span class="va">interpretation</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">custom_result</span><span class="op">$</span><span class="va">transformed_table</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

