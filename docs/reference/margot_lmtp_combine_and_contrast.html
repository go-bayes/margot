<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Combine LMTP Models from Multiple Batches and Compute Cross-Batch Contrasts — margot_lmtp_combine_and_contrast • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Combine LMTP Models from Multiple Batches and Compute Cross-Batch Contrasts — margot_lmtp_combine_and_contrast"><meta name="description" content="This function merges LMTP models from multiple batch runs and computes user-specified
contrasts across batches. This enables comparisons between shifts that were estimated
in separate runs (e.g., comparing shift_zero from batch 2 with ipsi_02 from batch 1)."><meta property="og:description" content="This function merges LMTP models from multiple batch runs and computes user-specified
contrasts across batches. This enables comparisons between shifts that were estimated
in separate runs (e.g., comparing shift_zero from batch 2 with ipsi_02 from batch 1)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.264</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Combine LMTP Models from Multiple Batches and Compute Cross-Batch Contrasts</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_lmtp_combine_and_contrast.R" class="external-link"><code>R/margot_lmtp_combine_and_contrast.R</code></a></small>
      <div class="d-none name"><code>margot_lmtp_combine_and_contrast.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function merges LMTP models from multiple batch runs and computes user-specified
contrasts across batches. This enables comparisons between shifts that were estimated
in separate runs (e.g., comparing shift_zero from batch 2 with ipsi_02 from batch 1).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_lmtp_combine_and_contrast</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  contrasts <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  contrast_scale <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"additive"</span>, <span class="st">"rr"</span>, <span class="st">"or"</span><span class="op">)</span>,</span>
<span>  auto_pairwise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_null_contrasts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>One or more LMTP output objects from margot_lmtp()</p></dd>


<dt id="arg-contrasts">contrasts<a class="anchor" aria-label="anchor" href="#arg-contrasts"></a></dt>
<dd><p>Optional list of character vectors (each length 2) specifying contrast pairs.
Example: list(c("shift_zero", "ipsi_02"), c("ipsi_10", "ipsi_05"))</p></dd>


<dt id="arg-contrast-scale">contrast_scale<a class="anchor" aria-label="anchor" href="#arg-contrast-scale"></a></dt>
<dd><p>Scale for contrasts: "additive", "rr", or "or". Default is "additive".</p></dd>


<dt id="arg-auto-pairwise">auto_pairwise<a class="anchor" aria-label="anchor" href="#arg-auto-pairwise"></a></dt>
<dd><p>Logical, if TRUE compute all pairwise contrasts among available shifts.
Default is FALSE. If both contrasts and auto_pairwise are specified, contrasts takes precedence.</p></dd>


<dt id="arg-include-null-contrasts">include_null_contrasts<a class="anchor" aria-label="anchor" href="#arg-include-null-contrasts"></a></dt>
<dd><p>Logical, if TRUE include contrasts against null shift when
auto_pairwise = TRUE. Default is TRUE. Ignored when auto_pairwise = FALSE.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>Logical, if TRUE suppress informational CLI messages. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with the standard LMTP output structure:</p>
<dl><dt>models</dt>
<dd><p>NULL (not retained per design)</p></dd>

  <dt>contrasts</dt>
<dd><p>List of contrasts by outcome</p></dd>

  <dt>individual_tables</dt>
<dd><p>List of evaluation tables by outcome</p></dd>

  <dt>combined_tables</dt>
<dd><p>List of combined tables across outcomes</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function merges models by outcome and shift, then computes specified contrasts only
where both shifts exist for the same outcome. Original models are not retained in the output.
If an outcome is missing from one batch or a shift doesn't exist for a particular outcome,
the function warns but continues processing valid contrasts.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Run two separate LMTP batches with non-overlapping shifts</span></span></span>
<span class="r-in"><span><span class="va">fit_batch_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="margot_lmtp.html">margot_lmtp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  outcome_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome1"</span>, <span class="st">"outcome2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trt <span class="op">=</span> <span class="va">A</span>,</span></span>
<span class="r-in"><span>  shift_functions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ipsi_02 <span class="op">=</span> <span class="fu">ipsi</span><span class="op">(</span><span class="fl">2</span><span class="op">)</span>, ipsi_05 <span class="op">=</span> <span class="fu">ipsi</span><span class="op">(</span><span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  include_null_shift <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit_batch_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="margot_lmtp.html">margot_lmtp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  outcome_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome1"</span>, <span class="st">"outcome2"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  trt <span class="op">=</span> <span class="va">A</span>,</span></span>
<span class="r-in"><span>  shift_functions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>ipsi_10 <span class="op">=</span> <span class="fu">ipsi</span><span class="op">(</span><span class="fl">10</span><span class="op">)</span>, shift_zero <span class="op">=</span> <span class="va">treatment_zero</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  include_null_shift <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Combine and compute cross-batch contrasts</span></span></span>
<span class="r-in"><span><span class="va">combined</span> <span class="op">&lt;-</span> <span class="fu">margot_lmtp_combine_and_contrast</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit_batch_1</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit_batch_2</span>,</span></span>
<span class="r-in"><span>  contrasts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"shift_zero"</span>, <span class="st">"ipsi_02"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"shift_zero"</span>, <span class="st">"ipsi_05"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ipsi_10"</span>, <span class="st">"ipsi_02"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  contrast_scale <span class="op">=</span> <span class="st">"additive"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or use automatic pairwise contrasts</span></span></span>
<span class="r-in"><span><span class="va">combined_auto</span> <span class="op">&lt;-</span> <span class="fu">margot_lmtp_combine_and_contrast</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">fit_batch_1</span>,</span></span>
<span class="r-in"><span>  <span class="va">fit_batch_2</span>,</span></span>
<span class="r-in"><span>  auto_pairwise <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  include_null_contrasts <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  contrast_scale <span class="op">=</span> <span class="st">"additive"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

