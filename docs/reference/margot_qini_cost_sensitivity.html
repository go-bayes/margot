<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Perform Cost Sensitivity Analysis for QINI Curves — margot_qini_cost_sensitivity • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Perform Cost Sensitivity Analysis for QINI Curves — margot_qini_cost_sensitivity"><meta name="description" content="Generates QINI curves across multiple treatment cost scenarios to understand
how optimal treatment allocation changes with cost. This allows exploration
of policy recommendations under different budget constraints without rerunning
the causal forest models."><meta property="og:description" content="Generates QINI curves across multiple treatment cost scenarios to understand
how optimal treatment allocation changes with cost. This allows exploration
of policy recommendations under different budget constraints without rerunning
the causal forest models."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.229</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Perform Cost Sensitivity Analysis for QINI Curves</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_qini_cost_sensitivity.R" class="external-link"><code>R/margot_qini_cost_sensitivity.R</code></a></small>
      <div class="d-none name"><code>margot_qini_cost_sensitivity.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates QINI curves across multiple treatment cost scenarios to understand
how optimal treatment allocation changes with cost. This allows exploration
of policy recommendations under different budget constraints without rerunning
the causal forest models.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_qini_cost_sensitivity</span><span class="op">(</span></span>
<span>  <span class="va">models</span>,</span>
<span>  costs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">5</span><span class="op">)</span>,</span>
<span>  model_names <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spend_levels <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>  baseline_method <span class="op">=</span> <span class="st">"maq_no_covariates"</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">12345</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-models">models<a class="anchor" aria-label="anchor" href="#arg-models"></a></dt>
<dd><p>List returned by margot_causal_forest(), containing results
and optionally full_models.</p></dd>


<dt id="arg-costs">costs<a class="anchor" aria-label="anchor" href="#arg-costs"></a></dt>
<dd><p>Numeric vector of treatment costs to evaluate. Default is
c(0.2, 0.5, 1, 2, 5) representing a range from cheap to expensive treatments.</p></dd>


<dt id="arg-model-names">model_names<a class="anchor" aria-label="anchor" href="#arg-model-names"></a></dt>
<dd><p>Optional character vector specifying which models to process.
Default NULL (all models).</p></dd>


<dt id="arg-spend-levels">spend_levels<a class="anchor" aria-label="anchor" href="#arg-spend-levels"></a></dt>
<dd><p>Numeric vector of spend levels for difference gain summaries.
Default is 0.1.</p></dd>


<dt id="arg-baseline-method">baseline_method<a class="anchor" aria-label="anchor" href="#arg-baseline-method"></a></dt>
<dd><p>Method for generating baseline. See margot_qini() for details.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Logical; print progress messages (default TRUE).</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Integer; base seed for reproducible computations (default 12345).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with class "margot_qini_cost_sensitivity" containing:</p><ul><li><p><code>results</code>: Named list where each element is a cost scenario containing
    QINI results from margot_qini()</p></li>
<li><p><code>costs</code>: The cost values used</p></li>
<li><p><code>models_processed</code>: Names of models that were processed</p></li>
<li><p><code>summary</code>: Data frame summarizing key metrics across costs</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function systematically varies the treatment_cost parameter in margot_qini()
to show how QINI curves and optimal treatment fractions change with cost.</p>
<p>Lower costs (e.g., 0.2) represent scenarios where treatment is cheap relative
to budget, resulting in steeper QINI curves and larger optimal treatment fractions.
Higher costs (e.g., 5) represent expensive treatments where only the highest-effect
individuals justify treatment.</p>
<p>The summary table includes the optimal treatment fraction and expected gain
at key spend levels for each cost scenario, facilitating comparison across
different budget constraints.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Basic cost sensitivity analysis</span></span></span>
<span class="r-in"><span><span class="va">cost_sens</span> <span class="op">&lt;-</span> <span class="fu">margot_qini_cost_sensitivity</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">causal_forest_results</span>,</span></span>
<span class="r-in"><span>  costs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.5</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># View summary of optimal treatment fractions</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cost_sens</span><span class="op">$</span><span class="va">summary</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot results for a specific model across costs</span></span></span>
<span class="r-in"><span><span class="fu"><a href="margot_plot_qini_cost_sensitivity.html">margot_plot_qini_cost_sensitivity</a></span><span class="op">(</span><span class="va">cost_sens</span>, model_name <span class="op">=</span> <span class="st">"model_anxiety"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Detailed analysis for specific models</span></span></span>
<span class="r-in"><span><span class="va">cost_sens_detailed</span> <span class="op">&lt;-</span> <span class="fu">margot_qini_cost_sensitivity</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">causal_forest_results</span>,</span></span>
<span class="r-in"><span>  costs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">3</span>, by <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span>, <span class="co"># Fine-grained cost grid</span></span></span>
<span class="r-in"><span>  model_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model_anxiety"</span>, <span class="st">"model_depression"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  spend_levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>, <span class="fl">0.4</span><span class="op">)</span> <span class="co"># More spend levels</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

