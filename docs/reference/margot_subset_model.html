<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Subset Model Results for Binary and Categorical Exposures — margot_subset_model • margot</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet"><link href="../deps/Fira_Sans-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Subset Model Results for Binary and Categorical Exposures — margot_subset_model"><meta name="description" content="This function extracts and combines evaluation tables for specified outcome variables
from model results, handling both binary and categorical exposure models. It provides
enhanced functionality for creating and analyzing subsets based on various conditions."><meta property="og:description" content="This function extracts and combines evaluation tables for specified outcome variables
from model results, handling both binary and categorical exposure models. It provides
enhanced functionality for creating and analyzing subsets based on various conditions."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">margot</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.34</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/go-bayes/margot/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Subset Model Results for Binary and Categorical Exposures</h1>
      <small class="dont-index">Source: <a href="https://github.com/go-bayes/margot/blob/HEAD/R/margot_subset_model.R" class="external-link"><code>R/margot_subset_model.R</code></a></small>
      <div class="d-none name"><code>margot_subset_model.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function extracts and combines evaluation tables for specified outcome variables
from model results, handling both binary and categorical exposure models. It provides
enhanced functionality for creating and analyzing subsets based on various conditions.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">margot_subset_model</span><span class="op">(</span></span>
<span>  <span class="va">model_results</span>,</span>
<span>  outcome_vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset_condition <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"RD"</span>,</span>
<span>  contrast <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  X <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset_var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  subset_value <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  subset_operator <span class="op">=</span> <span class="st">"=="</span>,</span>
<span>  subset_description <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-model-results">model_results<a class="anchor" aria-label="anchor" href="#arg-model-results"></a></dt>
<dd><p>A list of model results from `model_causal_forest` or similar functions.</p></dd>


<dt id="arg-outcome-vars">outcome_vars<a class="anchor" aria-label="anchor" href="#arg-outcome-vars"></a></dt>
<dd><p>Optional. A character vector of outcome variable names. If NULL,
the function will use all models in the input.</p></dd>


<dt id="arg-subset-condition">subset_condition<a class="anchor" aria-label="anchor" href="#arg-subset-condition"></a></dt>
<dd><p>A logical vector indicating the subset of data to use. Default is NULL.
Can be generated using the subset_var, subset_value, and subset_operator parameters.</p></dd>


<dt id="arg-scale">scale<a class="anchor" aria-label="anchor" href="#arg-scale"></a></dt>
<dd><p>A character string indicating the scale to use. Default is "RD".</p></dd>


<dt id="arg-contrast">contrast<a class="anchor" aria-label="anchor" href="#arg-contrast"></a></dt>
<dd><p>For categorical exposures, a single character string specifying the contrast to extract.</p></dd>


<dt id="arg-x">X<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>Optional. The feature matrix used in the original models. Required if using subset_var.</p></dd>


<dt id="arg-subset-var">subset_var<a class="anchor" aria-label="anchor" href="#arg-subset-var"></a></dt>
<dd><p>Optional. The name of the variable to use for subsetting.</p></dd>


<dt id="arg-subset-value">subset_value<a class="anchor" aria-label="anchor" href="#arg-subset-value"></a></dt>
<dd><p>Optional. The value to compare against for subsetting. Default is 1.</p></dd>


<dt id="arg-subset-operator">subset_operator<a class="anchor" aria-label="anchor" href="#arg-subset-operator"></a></dt>
<dd><p>Optional. The operator to use for comparison ("==", "&gt;", "&gt;=", "&lt;", "&lt;=", "!="). Default is "==".</p></dd>


<dt id="arg-subset-description">subset_description<a class="anchor" aria-label="anchor" href="#arg-subset-description"></a></dt>
<dd><p>Optional. A description of the subset for reporting. If NULL, one will be generated.</p></dd>


<dt id="arg-debug">debug<a class="anchor" aria-label="anchor" href="#arg-debug"></a></dt>
<dd><p>Logical. If TRUE, print debug information. Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list containing:</p>
<dl><dt>results</dt>
<dd><p>A data frame combining all custom evaluation tables for the specified outcomes and contrast.</p></dd>

  <dt>subset_condition</dt>
<dd><p>The logical vector used for subsetting.</p></dd>

  <dt>subset_description</dt>
<dd><p>A description of the subset.</p></dd>

  <dt>subset_info</dt>
<dd><p>Additional information about the subset, if available.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function can be used in two ways:
1. By providing a pre-computed logical vector as `subset_condition`.
2. By providing a variable name (`subset_var`), value (`subset_value`), and operator (`subset_operator`)
   to generate the subset condition automatically.</p>
<p>For categorical exposures, specify the contrast parameter to extract specific comparisons.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Example 1: Basic subsetting with a pre-computed condition</span></span></span>
<span class="r-in"><span><span class="va">subset_condition_conservative</span> <span class="op">&lt;-</span> <span class="va">X</span><span class="op">[</span>, <span class="st">"t0_political_conservative_z"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="va">model_subset_conservative</span> <span class="op">&lt;-</span> <span class="fu">margot_subset_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_results <span class="op">=</span> <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  subset_condition <span class="op">=</span> <span class="va">subset_condition_conservative</span>,</span></span>
<span class="r-in"><span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 2: Using the built-in subsetting functionality</span></span></span>
<span class="r-in"><span><span class="va">model_subset_religious</span> <span class="op">&lt;-</span> <span class="fu">margot_subset_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_results <span class="op">=</span> <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  X <span class="op">=</span> <span class="va">X</span>,</span></span>
<span class="r-in"><span>  subset_var <span class="op">=</span> <span class="st">"t0_religion_bigger_denominations_not_rel_binary"</span>,</span></span>
<span class="r-in"><span>  subset_value <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  subset_description <span class="op">=</span> <span class="st">"Effects among religious participants"</span>,</span></span>
<span class="r-in"><span>  debug <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 3: For categorical exposures with specific contrast</span></span></span>
<span class="r-in"><span><span class="va">model_subset_gen_z</span> <span class="op">&lt;-</span> <span class="fu">margot_subset_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_results <span class="op">=</span> <span class="va">models_cat</span>,</span></span>
<span class="r-in"><span>  X <span class="op">=</span> <span class="va">X</span>,</span></span>
<span class="r-in"><span>  subset_var <span class="op">=</span> <span class="st">"t0_gen_cohort_gen_Z_binary"</span>,</span></span>
<span class="r-in"><span>  subset_value <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  contrast <span class="op">=</span> <span class="st">"[6.0,7.0] - [1.0,5.0)"</span>,</span></span>
<span class="r-in"><span>  scale <span class="op">=</span> <span class="st">"RD"</span>,</span></span>
<span class="r-in"><span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 4: Multiple outcome variables</span></span></span>
<span class="r-in"><span><span class="va">model_subset_boomers</span> <span class="op">&lt;-</span> <span class="fu">margot_subset_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_results <span class="op">=</span> <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  outcome_vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"t2_wellbeing_z"</span>, <span class="st">"t2_depression_z"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  X <span class="op">=</span> <span class="va">X</span>,</span></span>
<span class="r-in"><span>  subset_var <span class="op">=</span> <span class="st">"t0_gen_cohort_gen_Boomers_binary"</span>,</span></span>
<span class="r-in"><span>  subset_value <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>  subset_operator <span class="op">=</span> <span class="st">"=="</span>,</span></span>
<span class="r-in"><span>  subset_description <span class="op">=</span> <span class="st">"Effects among Baby Boomer participants"</span>,</span></span>
<span class="r-in"><span>  debug <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example 5: More complex subsetting (multiple conditions)</span></span></span>
<span class="r-in"><span><span class="co"># Define a complex condition directly</span></span></span>
<span class="r-in"><span><span class="va">complex_condition</span> <span class="op">&lt;-</span> <span class="va">X</span><span class="op">[</span>, <span class="st">"t0_political_conservative_z"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">X</span><span class="op">[</span>, <span class="st">"t0_age_z"</span><span class="op">]</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">model_subset_complex</span> <span class="op">&lt;-</span> <span class="fu">margot_subset_model</span><span class="op">(</span></span></span>
<span class="r-in"><span>  model_results <span class="op">=</span> <span class="va">models_binary</span>,</span></span>
<span class="r-in"><span>  subset_condition <span class="op">=</span> <span class="va">complex_condition</span>,</span></span>
<span class="r-in"><span>  subset_description <span class="op">=</span> <span class="st">"Conservative (&gt;1 SD) and not very young (&gt;-2 SD in age)"</span>,</span></span>
<span class="r-in"><span>  debug <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/go-bayes" class="external-link">Joseph A Bulbulia</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

