% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/margot_assess_overlap.R
\name{margot_assess_overlap}
\alias{margot_assess_overlap}
\title{Assess Covariate Overlap from Causal Forest Models}
\usage{
margot_assess_overlap(
  model_results,
  model_names = NULL,
  exposure_name = NULL,
  label_mapping = NULL,
  plot = TRUE,
  save_plots = FALSE,
  output_dir = NULL,
  verbose = TRUE
)
}
\arguments{
\item{model_results}{Output from margot_causal_forest() or margot_flip_forests()}

\item{model_names}{Character vector of model names to assess. If NULL, all models.}

\item{exposure_name}{Character string naming the exposure/treatment variable. If NULL, defaults to "Treatment".}

\item{label_mapping}{Named list mapping variable names to custom labels for the exposure.}

\item{plot}{Logical indicating whether to create overlap plots. Default is TRUE.}

\item{save_plots}{Logical indicating whether to save plots. Default is FALSE.}

\item{output_dir}{Directory to save plots if save_plots is TRUE.}

\item{verbose}{Logical for detailed messages. Default is TRUE.}
}
\value{
A list containing:
\itemize{
  \item{overlap_summary}{Data frame with overlap statistics for each model}
  \item{propensity_plots}{List of ggplot objects (if plot = TRUE)}
  \item{balance_tables}{Covariate balance tables for each model}
  \item{trimming_summary}{Summary of observations trimmed due to poor overlap}
}
}
\description{
This function analyzes propensity score overlap and covariate balance
from the outputs of margot_causal_forest() or margot_flip_forests().
It provides diagnostics for assessing the validity of causal estimates.
}
\details{
The function assesses overlap using several metrics:
\itemize{
  \item Propensity score distributions by treatment group
  \item Common support region statistics
  \item Test calibration from grf (differential prediction test)
  \item Covariate balance within propensity score strata
}

Poor overlap (propensity scores near 0 or 1) indicates limited comparability
between treatment groups and may lead to unreliable causal estimates.
}
\examples{
\dontrun{
# assess overlap for all models
overlap_results <- margot_assess_overlap(model_results)

# assess specific models only
overlap_results <- margot_assess_overlap(
  model_results,
  model_names = c("model_outcome1", "model_outcome2")
)

# save plots
overlap_results <- margot_assess_overlap(
  model_results,
  save_plots = TRUE,
  output_dir = "output/overlap_diagnostics"
)
}

}
